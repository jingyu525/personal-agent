# 个人助手项目代码仓库管理评估计划

## 项目概述
这是一个基于本地 AI 的个人助手项目，包含知识库管理、待办事项、数据采集等功能。

## 项目结构分析

### 📂 核心代码文件（应该纳入版本控制）

#### Python 模块
- `mcp_kb_server.py` - MCP 知识库服务器（核心功能）
- `search.py` - 知识库搜索功能
- `ingest.py` - 数据导入和索引构建
- `kb_init.py` - 知识库初始化
- `mcp_todo_server.py` - MCP 待办服务器（需要确认是否存在）

#### Shell 脚本
- `collect.sh` - 统一数据采集入口（剪贴板、网页、PDF、Word、音频、截图）
- `agent.sh` - 统一命令入口

#### 工作流脚本
- `workflows/daily_plan.sh` - 每日计划生成
- `workflows/process_inbox.sh` - Inbox 处理流程
- `workflows/weekly_review.sh` - 周报生成

#### 技能定义
- `skills/coding.skill.md` - 代码助手技能定义
- `skills/knowledge.skill.md` - 知识管理技能定义
- `skills/writing.skill.md` - 写作助手技能定义

### 📂 配置文件（需要评估）

#### 应该纳入版本控制
- `mcp_config.json` - MCP 服务器配置（**注意：需要检查是否包含敏感信息**）
  - 当前内容：只包含本地路径和命令，无敏感信息
  - 建议：纳入版本控制，但需要使用相对路径或环境变量

#### 不应该纳入版本控制
- `.claude/claude.json` - Claude 客户端配置（包含用户特定路径）
  - 包含硬编码的用户路径 `/Users/zyb/personal-agent`
  - 建议：添加到 `.gitignore`

### 📂 数据文件（不应该纳入版本控制）

#### 知识库数据
- `knowledge/inbox/*.md` - 收集的知识内容
  - 这些是个人数据，不应该共享
  - 建议：添加到 `.gitignore`

#### 向量数据库
- `vector_db/chroma.sqlite3` - ChromaDB 数据库文件
  - 二进制数据库文件，体积会增长
  - 可以通过代码重建
  - 建议：添加到 `.gitignore`

#### 待办事项
- `todos/today.md` - 今日待办（个人数据）
- `todos/backlog.md` - 待办积压（个人数据）
  - 建议：添加到 `.gitignore`

### 📂 缓存和环境文件（不应该纳入版本控制）

#### Python 虚拟环境
- `.venv/` - Python 虚拟环境
  - 体积巨大，包含所有依赖包
  - 可以通过 `requirements.txt` 重建
  - 建议：添加到 `.gitignore`

#### 类型检查缓存
- `.mypy_cache/` - mypy 类型检查缓存
  - 自动生成的缓存文件
  - 建议：添加到 `.gitignore`

### 📂 文档文件（需要评估）

#### 项目文档
- `.trae/documents/修复collect.sh的PDF警告问题.md`
  - 这是开发过程中的问题记录
  - 建议：如果包含有价值的技术文档，可以纳入版本控制
  - 如果只是临时问题记录，可以忽略

## 推荐的 .gitignore 配置

```gitignore
# Python
__pycache__/
*.py[cod]
*$py.class
*.so
.Python
build/
develop-eggs/
dist/
downloads/
eggs/
.eggs/
lib/
lib64/
parts/
sdist/
var/
wheels/
*.egg-info/
.installed.cfg
*.egg

# Virtual Environment
.venv/
venv/
ENV/
env/

# IDE
.vscode/
.idea/
*.swp
*.swo
*~

# Type checking
.mypy_cache/
.dmypy.json
dmypy.json

# 个人数据（不共享）
knowledge/
todos/
vector_db/

# 配置文件（包含用户特定路径）
.claude/

# 系统文件
.DS_Store
Thumbs.db

# 临时文件
*.tmp
*.log
/tmp/
```

## 建议添加的文件

### 1. README.md
项目说明文档，包括：
- 项目介绍
- 安装步骤
- 使用方法
- 依赖说明

### 2. requirements.txt
Python 依赖列表：
```
chromadb
pdfplumber
python-docx
openai-whisper
ollama
```

### 3. setup.sh
环境初始化脚本：
- 创建虚拟环境
- 安装依赖
- 初始化知识库

## 敏感信息检查

### ✅ 已检查文件
1. `mcp_config.json` - 无敏感信息，只包含本地路径
2. `mcp_kb_server.py` - 无敏感信息，使用本地 Ollama 服务
3. `collect.sh` - 无敏感信息，使用本地工具

### ⚠️ 需要注意
- 所有路径都使用硬编码的 `/Users/zyb/personal-agent`
- 建议使用环境变量或相对路径提高可移植性

## 最终建议

### 应该纳入版本控制的文件：
1. 所有 `.py` 源代码文件
2. 所有 `.sh` 脚本文件
3. `skills/*.md` 技能定义文件
4. `mcp_config.json`（使用相对路径）
5. `README.md`（需要创建）
6. `requirements.txt`（需要创建）
7. `.gitignore`（需要创建）

### 应该忽略的文件/目录：
1. `.venv/` - 虚拟环境
2. `.mypy_cache/` - 类型检查缓存
3. `.claude/` - Claude 客户端配置
4. `knowledge/` - 个人知识库
5. `todos/` - 个人待办事项
6. `vector_db/` - 向量数据库
7. `.trae/documents/` - 开发过程文档（可选）

## 执行步骤

1. 创建 `.gitignore` 文件
2. 创建 `requirements.txt` 文件
3. 创建 `README.md` 文件
4. 修改 `mcp_config.json` 使用相对路径
5. 初始化 Git 仓库（如果还没有）
6. 添加文件到版本控制
7. 创建首次提交

## 注意事项

1. **个人隐私**：确保所有个人数据（知识库、待办事项）都被忽略
2. **路径可移植性**：将硬编码路径改为相对路径或环境变量
3. **依赖管理**：确保 `requirements.txt` 包含所有必要的依赖
4. **文档完善**：添加 README 说明项目用途和使用方法
